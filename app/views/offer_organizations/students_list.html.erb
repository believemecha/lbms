<h1 style="text-align: center; color: #2c3e50;">Students in <%= @organization.name %></h1>

<table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
  <thead style="background-color: #2980b9; color: white; font-size: 18px;">
    <tr>
      <th style="padding: 10px; text-align: left;">S.No</th>
      <th style="padding: 10px; text-align: left;">Name</th>
      <th style="padding: 10px; text-align: left;">Info</th>
      <th style="padding: 10px; text-align: left;">QR</th>
      <th style="padding: 10px; text-align: left;">Image</th>
    </tr>
  </thead>
  <tbody style="font-size: 16px;">
    <% @students.each_with_index do |student,idx| %>
      <tr style="border-bottom: 1px solid #ecf0f1;">
        <td style="padding: 10px; vertical-align: middle;"><%= idx + 1 %></td>
        <td style="padding: 10px; vertical-align: middle;"><%= student.name %></td>
        <td style="padding: 10px; vertical-align: middle;"><%= student.info %></td>
        <td style="padding: 10px; vertical-align: middle;">
          <% if student.code.present? %>
            <% # Generate the QR code using a combination of the organization and student code %>
            <%= image_tag(RQRCode::QRCode.new(@organization.code + "::::" + student.code).as_png(size: 100).to_data_url) %>
          <% else %>
            <span>No QR</span>
          <% end %>
        </td>
        <td style="padding: 10px; vertical-align: middle;">
          <% if student.image_string.present? %>
            <img src="<%= student.image_string %>" alt="<%= student.name %>" style="width: 100px; height: auto;">
          <% else %>
            <span>No image</span>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<style>
  table {
    margin: 0 auto;
    border: 1px solid #bdc3c7;
    border-radius: 8px;
    overflow: hidden;
    width: 80%; /* Make the table a bit more responsive */
  }

  th, td {
    padding: 12px 15px;
    text-align: center;
  }

  tr:nth-child(even) {
    background-color: #ecf0f1;
  }

  tr:hover {
    background-color: #f5f5f5;
  }

  td img {
    max-width: 100px; /* Limit the size of the image */
    height: auto;
  }
</style>
